<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="../jquery-3.2.1.js"></script>
<script src="../molecule.js"></script>

</head>
<body>
	<div style="width:200px; height:200px; background: blue;" id="d">
		<template objective>
			<script>
				this.changeBg = function(){
					var s = `rgb(${Math.floor(Math.random() * 255)},${Math.floor(Math.random() * 255)},${Math.floor(Math.random() * 255)})`;
					this.style.backgroundColor = s				
				}
				this.onclick = () => {this.changeBg(); };
			</script>
		</template>
	</div>
	<abcd></abcd>
	
</body>

<script>
	$(function(){
		$('template[objective]').each((i, e) => {
			var fun = new Function($(e.content).find('script').html());
			fun.call(e.parentElement);
		});
	});

	HTMLElement.prototype.test = function(){console.log("hello")}
	d.innerHTML = '<div id=t>tt</div>'
	t.test();
</script>

</html>